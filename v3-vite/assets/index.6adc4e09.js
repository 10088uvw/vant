import{b as t,e}from"./use-translate.ed5e29f0.js";import{c as o,b as s,w as i}from"./with-install.9958dc40.js";import{i as r}from"./style.c6c38aef.js";import{u as n,b as a}from"./unit.2a41fb1b.js";import{P as f,Q as d,B as l,G as u,H as m,E as c,z as p,f as h}from"./vendor.ba7e37c4.js";import{o as x,u as v}from"./index.6ba73617.js";import{u as b}from"./index.a4c0d7b1.js";import{u as g}from"./index.d9de3cd2.js";const[w,j]=o("sticky");const y=i(l({name:w,props:{zIndex:[Number,String],container:Object,offsetTop:{type:[Number,String],default:0},offsetBottom:{type:[Number,String],default:0},position:{type:String,default:"top"}},emits:["scroll","change"],setup(o,{emit:i,slots:l}){const w=u(),y=b(w),$=m({fixed:!1,width:0,height:0,transform:0}),S=c((()=>n("top"===o.position?o.offsetTop:o.offsetBottom))),I=c((()=>{const{fixed:t,height:e,width:o}=$;if(t)return{width:`${o}px`,height:`${e}px`}})),z=c((()=>{if(!$.fixed)return;const t=e(a(o.zIndex),{width:`${$.width}px`,height:`${$.height}px`,[o.position]:`${S.value}px`});return $.transform&&(t.transform=`translate3d(0, ${$.transform}px, 0)`),t})),B=()=>{if(!w.value||r(w))return;const{container:t,position:e}=o,n=g(w),a=s(window);if($.width=n.width,$.height=n.height,"top"===e)if(t){const e=g(t),o=e.bottom-S.value-$.height;$.fixed=S.value>n.top&&e.bottom>0,$.transform=o<0?o:0}else $.fixed=S.value>n.top;else{const{clientHeight:e}=document.documentElement;if(t){const o=g(t),s=e-o.top-S.value-$.height;$.fixed=e-S.value<n.bottom&&e>o.top,$.transform=s<0?-s:0}else $.fixed=e-S.value<n.bottom}(t=>{i("scroll",{scrollTop:t,isFixed:$.fixed})})(a)};return p((()=>$.fixed),(t=>i("change",t))),v("scroll",B,{target:y}),function(e,o){if(!t||!window.IntersectionObserver)return;const s=new IntersectionObserver((t=>{o(t[0].intersectionRatio>0)}),{root:document.body}),i=()=>{e.value&&s.unobserve(e.value)};f(i),d(i),x((()=>{e.value&&s.observe(e.value)}))}(w,B),()=>{var t;return h("div",{ref:w,style:I.value},[h("div",{class:j({fixed:$.fixed}),style:z.value},[null==(t=l.default)?void 0:t.call(l)])])}}}));export{y as S};
