import{q as e,t,a as s}from"./use-translate.ed5e29f0.js";import{c as a,w as l}from"./with-install.9958dc40.js";import{u as o}from"./use-expose.ecdf2fa3.js";import{c as i,i as n,r}from"./utils.83cd68fa.js";import{G as u,E as m,Q as c,R as d,P as p,B as f,z as h,f as v,r as S,a as j,w as b,D as x,F as D,o as y,e as C,t as H}from"./vendor.ba7e37c4.js";import{V as F,G as M}from"./index.b5deb37b.js";import{T as g}from"./function-call.2531544a.js";import"./constant.4d85ecb9.js";import"./unit.2a41fb1b.js";import"./useChildren.6233e7a6.js";import"./use-route.59eae6fc.js";import"./index.667f321a.js";import"./useParent.7ddf7229.js";import"./mount-component.858fa0c4.js";import"./index.03bd3dc3.js";import"./interceptor.29d0b3cc.js";import"./use-touch.3bbb1d83.js";import"./event.7d40caae.js";import"./index.6ba73617.js";import"./index.a4c0d7b1.js";import"./use-lazy-render.924a5154.js";import"./on-popup-reopen.fc1de525.js";import"./index.30afc43b.js";import"./index.e2ba8582.js";function k(e){var t,s,a,l,o=u(e.time),f=m((()=>{return{total:e=o.value,days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),milliseconds:Math.floor(e%1e3)};var e})),h=()=>{a=!1,i(t)},v=()=>Math.max(s-Date.now(),0),S=t=>{o.value=t,null==e.onChange||e.onChange(f.value),0===t&&(h(),null==e.onFinish||e.onFinish())},j=()=>{t=r((()=>{a&&(S(v()),o.value>0&&j())}))},b=()=>{t=r((()=>{if(a){var e=v();t=e,s=o.value,(Math.floor(t/1e3)!==Math.floor(s/1e3)||0===e)&&S(e),o.value>0&&b()}var t,s}))},x=()=>{n&&(e.millisecond?j():b())};return c(h),d((()=>{l&&(a=!0,l=!1,x())})),p((()=>{a&&(h(),l=!0)})),{start:()=>{a||(s=Date.now()+o.value,a=!0,x())},pause:h,reset:(t=e.time)=>{h(),o.value=t},current:f}}const[w,_]=a("count-down");const z=l(f({name:w,props:{autoStart:t,millisecond:Boolean,time:{type:[Number,String],default:0},format:{type:String,default:"HH:mm:ss"}},emits:["change","finish"],setup(t,{emit:s,slots:a}){const{start:l,pause:i,reset:n,current:r}=k({time:+t.time,millisecond:t.millisecond,onChange:e=>s("change",e),onFinish:()=>s("finish")}),u=m((()=>function(t,s){const{days:a}=s;let{hours:l,minutes:o,seconds:i,milliseconds:n}=s;if(t.includes("DD")?t=t.replace("DD",e(a)):l+=24*a,t.includes("HH")?t=t.replace("HH",e(l)):o+=60*l,t.includes("mm")?t=t.replace("mm",e(o)):i+=60*o,t.includes("ss")?t=t.replace("ss",e(i)):n+=1e3*i,t.includes("S")){const s=e(n,3);t=t.includes("SSS")?t.replace("SSS",s):t.includes("SS")?t.replace("SS",s.slice(0,2)):t.replace("S",s.charAt(0))}return t}(t.format,r.value))),c=()=>{n(+t.time),t.autoStart&&l()};return h((()=>t.time),c,{immediate:!0}),o({start:l,pause:i,reset:c}),()=>v("div",{class:_()},[a.default?a.default(r.value):u.value])}})),P={class:"block"},W=C("span",{class:"colon"},":",-1),B={class:"block"},G=C("span",{class:"colon"},":",-1),N={class:"block"};var R=f({setup(e){const t=s({"zh-CN":{reset:"重置",pause:"暂停",start:"开始",finished:"倒计时结束",millisecond:"毫秒级渲染",customStyle:"自定义样式",customFormat:"自定义格式",manualControl:"手动控制",formatWithDay:"DD 天 HH 时 mm 分 ss 秒"},"en-US":{reset:"Reset",pause:"Pause",start:"Start",finished:"Finished",millisecond:"Millisecond",customStyle:"Custom Style",customFormat:"Custom Format",manualControl:"Manual Control",formatWithDay:"DD Day, HH:mm:ss"}}),a=u(108e6),l=u(),o=()=>{var e;null==(e=l.value)||e.start()},i=()=>{var e;null==(e=l.value)||e.pause()},n=()=>{var e;null==(e=l.value)||e.reset()},r=()=>g(t("finished"));return(e,s)=>{const u=S("demo-block");return y(),j(D,null,[v(u,{title:x(t)("basicUsage")},{default:b((()=>[v(x(z),{time:a.value},null,8,["time"])])),_:1},8,["title"]),v(u,{title:x(t)("customFormat")},{default:b((()=>[v(x(z),{time:a.value,format:x(t)("formatWithDay")},null,8,["time","format"])])),_:1},8,["title"]),v(u,{title:x(t)("millisecond")},{default:b((()=>[v(x(z),{millisecond:"",time:a.value,format:"HH:mm:ss:SS"},null,8,["time"])])),_:1},8,["title"]),v(u,{title:x(t)("customStyle")},{default:b((()=>[v(x(z),{time:a.value},{default:b((e=>[C("span",P,H(e.hours),1),W,C("span",B,H(e.minutes),1),G,C("span",N,H(e.seconds),1)])),_:1},8,["time"])])),_:1},8,["title"]),v(u,{title:x(t)("manualControl")},{default:b((()=>[v(x(z),{ref:(e,t)=>{t.countDown=e,l.value=e},millisecond:"",time:3e3,"auto-start":!1,format:"ss:SSS",onFinish:r},null,512),v(x(F),{clickable:"","column-num":3},{default:b((()=>[v(x(M),{icon:"play-circle-o",text:x(t)("start"),onClick:o},null,8,["text"]),v(x(M),{icon:"pause-circle-o",text:x(t)("pause"),onClick:i},null,8,["text"]),v(x(M),{icon:"replay",text:x(t)("reset"),onClick:n},null,8,["text"])])),_:1})])),_:1},8,["title"])],64)}}});export{R as default};
