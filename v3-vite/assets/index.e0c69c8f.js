import"./use-translate.ed5e29f0.js";import{c as e,w as t}from"./with-install.9958dc40.js";import{s as r,p as a}from"./event.7d40caae.js";import{a as l,g as o}from"./unit.2a41fb1b.js";import{a as n,c as i}from"./number.b01aa591.js";import{u as s}from"./use-touch.3bbb1d83.js";import{B as u,G as d,E as m,f as c}from"./vendor.ba7e37c4.js";import{u as v}from"./index.5d553880.js";import{u as b}from"./index.d9de3cd2.js";const[g,p]=e("slider");const f=t(u({name:g,props:{range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},modelValue:{type:[Number,Array],default:0}},emits:["change","drag-end","drag-start","update:modelValue"],setup(e,{emit:t,slots:u}){let g,f,h;const y=d(),N=d(),S=s(),V=m((()=>Number(e.max)-Number(e.min))),j=m((()=>{const t=e.vertical?"width":"height";return{background:e.inactiveColor,[t]:l(e.barHeight)}})),w=t=>e.range&&Array.isArray(t),x=()=>{const{modelValue:t,min:r}=e;return w(t)?100*(t[1]-t[0])/V.value+"%":100*(t-Number(r))/V.value+"%"},B=m((()=>{const t={[e.vertical?"height":"width"]:x(),background:e.activeColor};N.value&&(t.transition="none");return t[e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left"]=(()=>{const{modelValue:t,min:r}=e;return w(t)?100*(t[0]-Number(r))/V.value+"%":"0%"})(),t})),C=t=>{const r=+e.min,a=+e.max,l=+e.step;t=i(t,r,a);const o=Math.round((t-r)/l)*l;return n(r,o)},k=(e,t)=>JSON.stringify(e)===JSON.stringify(t),T=(r,a)=>{r=w(r)?(e=>e[0]>e[1]?e.slice(0).reverse():e)(r).map(C):C(r),k(r,e.modelValue)||t("update:modelValue",r),a&&!k(r,f)&&t("change",r)},z=t=>{if(t.stopPropagation(),e.disabled||e.readonly)return;const{min:r,reverse:a,vertical:l,modelValue:o}=e,n=b(y),i=l?n.height:n.width,s=Number(r)+(l?a?n.bottom-t.clientY:t.clientY-n.top:a?n.right-t.clientX:t.clientX-n.left)/i*V.value;if(w(o)){const[e,t]=o;T(s<=(e+t)/2?[s,t]:[e,s],!0)}else T(s,!0)},A=r=>{if(e.disabled||e.readonly)return;"start"===N.value&&t("drag-start",r),a(r,!0),S.move(r),N.value="dragging";const l=b(y);let o=(e.vertical?S.deltaY.value:S.deltaX.value)/(e.vertical?l.height:l.width)*V.value;if(e.reverse&&(o=-o),w(f)){const t=e.reverse?1-g:g;h[t]=f[t]+o}else h=f+o;T(h)},X=r=>{e.disabled||e.readonly||("dragging"===N.value&&(T(h,!0),t("drag-end",r)),N.value="")},Y=t=>{if("number"==typeof t){return p("button-wrapper",["left","right"][t])}return p("button-wrapper",e.reverse?"left":"right")},H=(t,r)=>{if("number"==typeof r){const e=u[0===r?"left-button":"right-button"];if(e)return e({value:t})}return u.button?u.button({value:t}):c("div",{class:p("button"),style:o(e.buttonSize)},null)},J=t=>{const a="number"==typeof t?e.modelValue[t]:e.modelValue;return c("div",{role:"slider",class:Y(t),tabindex:e.disabled||e.readonly?-1:0,"aria-valuemin":+e.min,"aria-valuenow":a,"aria-valuemax":+e.max,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstart:r=>{"number"==typeof t&&(g=t),(t=>{e.disabled||e.readonly||(S.start(t),h=e.modelValue,f=w(h)?h.map(C):C(h),N.value="start")})(r)},onTouchmove:A,onTouchend:X,onTouchcancel:X,onClick:r},[H(a,t)])};return T(e.modelValue),v((()=>e.modelValue)),()=>c("div",{ref:y,style:j.value,class:p({vertical:e.vertical,disabled:e.disabled}),onClick:z},[c("div",{class:p("bar"),style:B.value},[e.range?[J(0),J(1)]:J()])])}}));export{f as S};
