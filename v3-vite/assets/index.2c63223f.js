import{i as e,a as t}from"./use-translate.ed5e29f0.js";import{c as o,w as s}from"./with-install.9958dc40.js";import{p as r}from"./event.7d40caae.js";import{c as a}from"./interceptor.29d0b3cc.js";import{c as i}from"./number.b01aa591.js";import{u as l}from"./use-touch.3bbb1d83.js";import{u as n}from"./use-expose.ecdf2fa3.js";import{B as d,G as c,H as u,E as m,f,r as p,a as b,w as g,D as j,F as h,o as x}from"./vendor.ba7e37c4.js";import{u as v}from"./index.ad939a3b.js";import{u as C}from"./index.d9de3cd2.js";import{V as y}from"./index.4d75283b.js";import{C as T}from"./index.d6d78035.js";import{C as w}from"./index.73a3c212.js";import{D as q}from"./function-call.fa8a4a67.js";import"./utils.83cd68fa.js";import"./index.6ba73617.js";import"./constant.4d85ecb9.js";import"./use-route.59eae6fc.js";import"./index.667f321a.js";import"./unit.2a41fb1b.js";import"./index.e2ba8582.js";import"./index.de7d568f.js";import"./index.06390f58.js";import"./mount-component.858fa0c4.js";import"./index.03bd3dc3.js";import"./index.a4c0d7b1.js";import"./use-lazy-render.924a5154.js";import"./on-popup-reopen.fc1de525.js";import"./index.30afc43b.js";import"./index.e3db815a.js";import"./useChildren.6233e7a6.js";import"./useParent.7ddf7229.js";const[W,_]=o("swipe-cell");const k=s(d({name:W,props:{disabled:Boolean,leftWidth:[Number,String],rightWidth:[Number,String],beforeClose:Function,stopPropagation:Boolean,name:{type:[Number,String],default:""}},emits:["open","close","click"],setup(t,{emit:o,slots:s}){let d,p,b;const g=c(),j=c(),h=c(),x=u({offset:0,dragging:!1}),y=l(),T=e=>e.value?C(e).width:0,w=m((()=>e(t.leftWidth)?+t.leftWidth:T(j))),q=m((()=>e(t.rightWidth)?+t.rightWidth:T(h))),W=e=>{d=!0,x.offset="left"===e?w.value:-q.value,o("open",{name:t.name,position:e})},k=e=>{x.offset=0,d&&(d=!1,o("close",{name:t.name,position:e}))},N=e=>{t.disabled||(b=x.offset,y.start(e))},P=e=>{if(t.disabled)return;const{deltaX:o}=y;if(y.move(e),y.isHorizontal()){p=!0,x.dragging=!0;(!d||o.value*b<0)&&r(e,t.stopPropagation),x.offset=i(o.value+b,-q.value,w.value)}},S=()=>{x.dragging&&(x.dragging=!1,(e=>{const t=Math.abs(x.offset),o=d?.85:.15,s="left"===e?w.value:q.value;s&&t>s*o?W(e):k(e)})(x.offset>0?"left":"right"),setTimeout((()=>{p=!1}),0))},z=(e="outside")=>{o("click",e),d&&!p&&a({interceptor:t.beforeClose,args:[{name:t.name,position:e}],done:()=>k(e)})},B=(e,t)=>o=>{t&&o.stopPropagation(),z(e)},D=(e,t)=>{const o=s[e];if(o)return f("div",{ref:t,class:_(e),onClick:B(e,!0)},[o()])};return n({open:W,close:k}),v(g,(()=>z("outside")),{eventName:"touchstart"}),()=>{var e;const t={transform:`translate3d(${x.offset}px, 0, 0)`,transitionDuration:x.dragging?"0s":".6s"};return f("div",{ref:g,class:_(),onClick:B("cell"),onTouchstart:N,onTouchmove:P,onTouchend:S,onTouchcancel:S},[f("div",{class:_("wrapper"),style:t},[D("left",j),null==(e=s.default)?void 0:e.call(s),D("right",h)])])}}}));var N=d({setup(e){const o=t({"zh-CN":{select:"选择",delete:"删除",collect:"收藏",title:"单元格",confirm:"确定删除吗？",cardTitle:"商品标题",beforeClose:"异步关闭",customContent:"自定义内容"},"en-US":{select:"Select",delete:"Delete",collect:"Collect",title:"Cell",confirm:"Are you sure to delete?",cardTitle:"Title",beforeClose:"Before Close",customContent:"Custom Content"}}),s=({position:e})=>{switch(e){case"left":case"cell":case"outside":return!0;case"right":return new Promise((e=>{q.confirm({title:o("confirm")}).then(e)}))}};return(e,t)=>{const r=p("demo-block");return x(),b(h,null,[f(r,{title:j(o)("basicUsage")},{default:g((()=>[f(j(k),null,{left:g((()=>[f(j(y),{square:"",type:"primary",text:j(o)("select")},null,8,["text"])])),right:g((()=>[f(j(y),{square:"",type:"danger",text:j(o)("delete")},null,8,["text"]),f(j(y),{square:"",type:"primary",text:j(o)("collect")},null,8,["text"])])),default:g((()=>[f(j(T),{border:!1,title:j(o)("title"),value:j(o)("content")},null,8,["title","value"])])),_:1})])),_:1},8,["title"]),f(r,{title:j(o)("customContent")},{default:g((()=>[f(j(k),null,{right:g((()=>[f(j(y),{square:"",type:"danger",class:"delete-button",text:j(o)("delete")},null,8,["text"])])),default:g((()=>[f(j(w),{num:"2",price:"2.00",desc:j(o)("desc"),title:j(o)("cardTitle"),thumb:"https://img.yzcdn.cn/vant/ipad.jpeg"},null,8,["desc","title"])])),_:1})])),_:1},8,["title"]),f(r,{title:j(o)("beforeClose")},{default:g((()=>[f(j(k),{"before-close":s},{left:g((()=>[f(j(y),{square:"",type:"primary",text:j(o)("select")},null,8,["text"])])),right:g((()=>[f(j(y),{square:"",type:"danger",text:j(o)("delete")},null,8,["text"])])),default:g((()=>[f(j(T),{border:!1,title:j(o)("title"),value:j(o)("content")},null,8,["title","value"])])),_:1})])),_:1},8,["title"])],64)}}});export{N as default};
